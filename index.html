<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#ec4899">
    <meta name="description" content="GK Store - Exclusive Video Marketplace">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    
    <title>GK Store - Video Marketplace</title>
    
    <!-- Favicon and Apple Touch Icons -->
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJvSURBVHgB7d2/axNRHAfw7727NFqtFoRCwIogCA50dHDQhS4qdBH6H5QiiBM6OEgHB4cODoqDgo4iCA4ODiL0HxAqhUIrSqFQ6h9pzfe8npWEkve7937v3fv7QEKavPfuZz7zvXdv3qMgiqk6EsB+cwv+ccB6BaKR8nhjblF9ErB/9Aq56X/ZpfAkqk+nT716qg+1zTtJzoN6fhFOT/c2J5/mhNFP8Ws7PZj9xZrpWPZorKHA2Ht3IJthgEvuXjC66yDE7krlCKwz6zANcKhzwzAUY0qlYhWAwdEkAL1HkgWYfv9rE4DeMakCMP5/5f7xDWKTLsD+8mK6o16AQYHL06njUFwrBcj0L5Y+SoxYPHx/ogBZRDGCUYASjAKUYBSgBKOAV4b9C3wK0oImT/HoAAAAAElFTkSuQmCC">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkdLIFN0b3JlIiwKICAic2hvcnRfbmFtZSI6ICJHSyBTdG9yZSIsCiAgImRlc2NyaXB0aW9uIjogIkV4Y2x1c2l2ZSBWaWRlbyBNYXJrZXRwbGFjZSIsCiAgInN0YXJ0X3VybCI6ICIuLyIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiIzAwMDAwMCIsCiAgInRoZW1lX2NvbG9yIjogIiNlYzQ4OTkiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJhbmRyb2lkLWxhdW5jaGVyaWNvbi05Ni05Ni5wbmciLAogICAgICAic2l6ZXMiOiAiOTZ4OTYiLAogICAgICAidHlwZSI6ICJpbWFnZS9wbmciCiAgICB9LAogICAgewogICAgICAic3JjIjogImFuZHJvaWQtbGF1bmNoZXJpY29uLTE5Mi0xOTIucG5nIiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9wbmciCiAgICB9LAogICAgewogICAgICAic3JjIjogImFuZHJvaWQtbGF1bmNoZXJpY29uLTUxMi01MTIucG5nIiwKICAgICAgInNpemVzIjogIjUxMng1MTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9wbmciLAogICAgICAicHVycG9zZSI6ICJhbnkgbWFzay1hYmxlIgogICAgfQogIF0KfQ==" id="app-manifest">
    
    <!-- iOS PWA Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="GK Store">
    
    <!-- Supabase Client -->
    <script src="https://unpkg.com/@supabase/supabase-js@2.39.7/dist/umd/supabase.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ALL YOUR ORIGINAL CSS CODE - KEEPING IT AS IS */
        :root {
            --primary: #ec4899;
            --primary-dark: #db2777;
            --secondary: #8b5cf6;
            --secondary-dark: #7c3aed;
            --accent: #f59e0b;
            --background: #000000;
            --surface: #18181b;
            --surface-light: #27272a;
            --text: #ffffff;
            --text-secondary: #a1a1aa;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --border: #3f3f46;
            --shadow: rgba(0, 0, 0, 0.5);
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
            --gradient-reverse: linear-gradient(135deg, var(--secondary), var(--primary));
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
            height: 100%;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.5;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            height: 100%;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--surface);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--surface-light);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--border);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* PWA Install Button Styles */
        .pwa-install-btn {
            position: fixed;
            left: 1rem;
            bottom: 9rem;
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 10px 25px rgba(236, 72, 153, 0.3);
            transition: all 0.3s ease;
            border: none;
        }

        .pwa-install-btn.hidden {
            display: none;
        }

        .pwa-install-btn i {
            font-size: 1.25rem;
        }

        /* Offline Indicator */
        .offline-indicator {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--danger);
            color: white;
            text-align: center;
            padding: 0.5rem;
            font-size: 0.875rem;
            z-index: 2000;
            display: none;
        }

        .offline-indicator.show {
            display: block;
            animation: slideIn 0.3s ease-out;
        }

        /* GK Icon Styles */
        .gk-icon {
            font-family: 'Arial Black', 'Segoe UI', sans-serif;
            font-weight: 900;
            font-size: 1.5rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            display: inline-block;
        }

        .gk-icon::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--gradient);
            border-radius: 1px;
        }

        .gk-icon-large {
            font-size: 2.5rem;
            letter-spacing: 2px;
        }

        .gk-icon-large::after {
            height: 3px;
            bottom: -3px;
        }

        /* Utility Classes */
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out;
        }

        .animate-slide-in {
            animation: slideIn 0.3s ease-out;
        }

        .animate-pulse {
            animation: pulse 2s infinite;
        }

        .animate-spin {
            animation: spin 1s linear infinite;
        }

        .shimmer {
            background: linear-gradient(90deg, 
                var(--surface-light) 0%, 
                var(--surface) 50%, 
                var(--surface-light) 100%);
            background-size: 200% auto;
            animation: shimmer 2s infinite linear;
        }

        .gradient-text {
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: inline-block;
        }

        .gradient-bg {
            background: var(--gradient);
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .blur-bg {
            backdrop-filter: blur(20px);
            background: rgba(0, 0, 0, 0.5);
        }

        /* Layout */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .page {
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        .content {
            padding: 5rem 1rem 7rem;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 0.875rem;
            text-decoration: none;
            cursor: pointer;
            border: none;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-primary {
            background: var(--gradient);
            color: white;
        }

        .btn-secondary {
            background: var(--surface-light);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-outline {
            background: transparent;
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .btn-icon {
            width: 2.5rem;
            height: 2.5rem;
            padding: 0;
            border-radius: 50%;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
        }

        .btn-lg {
            padding: 1rem 2rem;
            font-size: 1rem;
        }

        /* Cards */
        .card {
            background: var(--surface);
            border-radius: 1rem;
            border: 1px solid var(--border);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .card-glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        .card-body {
            padding: 1.5rem;
        }

        .card-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--border);
        }

        /* Forms */
        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .input {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--surface-light);
            border: 1px solid var(--border);
            border-radius: 0.75rem;
            color: var(--text);
            font-size: 0.875rem;
            transition: all 0.2s ease;
        }

        .input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1);
        }

        .textarea {
            min-height: 120px;
            resize: vertical;
        }

        /* Navigation */
        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
        }

        .nav-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 700;
            font-size: 1.25rem;
            text-decoration: none;
            color: var(--text);
        }

        .logo-icon {
            width: 2rem;
            height: 2rem;
            background: var(--gradient);
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 0.75rem 1rem;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--border);
        }

        .nav-items {
            display: flex;
            justify-content: space-around;
            align-items: center;
            max-width: 400px;
            margin: 0 auto;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-secondary);
            transition: all 0.2s ease;
            padding: 0.5rem;
            border-radius: 0.75rem;
            min-width: 4rem;
        }

        .nav-item:hover {
            color: var(--text);
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-item.active {
            color: var(--primary);
            background: rgba(236, 72, 153, 0.1);
        }

        .nav-item i {
            font-size: 1.25rem;
            margin-bottom: 0.25rem;
        }

        .nav-item span {
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* TikTok Style Video Player - UPDATED FOR MOBILE FULL SCREEN */
        .video-container {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            background: #000;
        }

        .video-player {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(
                to bottom,
                rgba(0, 0, 0, 0.8) 0%,
                transparent 20%,
                transparent 80%,
                rgba(0, 0, 0, 0.9) 100%
            );
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 2rem;
        }

        .video-controls {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .video-info {
            max-width: 600px;
        }

        .video-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .video-description {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .video-stats {
            display: flex;
            gap: 1rem;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.875rem;
        }

        .video-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        /* Action Buttons on Video */
        .video-right-actions {
            position: absolute;
            right: 1rem;
            bottom: 6rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            z-index: 100;
        }

        .video-right-actions .action-button {
            width: 3rem;
            height: 3rem;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .video-right-actions .action-button:hover {
            background: rgba(236, 72, 153, 0.5);
            transform: scale(1.1);
        }

        .video-right-actions i {
            font-size: 1.25rem;
        }

        /* Book and Buy Now Buttons Container */
        .video-top-actions {
            position: absolute;
            right: 1rem;
            top: 30%;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            z-index: 100;
        }

        .video-top-actions .action-button {
            width: 3rem;
            height: 3rem;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .video-top-actions .action-button:hover {
            background: rgba(236, 72, 153, 0.5);
            transform: scale(1.1);
        }

        .video-top-actions i {
            font-size: 1.25rem;
        }

        .action-label {
            font-size: 0.75rem;
            text-align: center;
            margin-top: 0.25rem;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        /* Share Button Container */
        .video-share-action {
            position: absolute;
            right: 1rem;
            bottom: 6rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 100;
        }

        /* NEW: Full screen video controls for mobile */
        .video-fullscreen-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 1rem;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            z-index: 101;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .video-progress {
            flex: 1;
            height: 4px;
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
            margin: 0 1rem;
            position: relative;
            cursor: pointer;
        }

        .video-progress-fill {
            position: absolute;
            height: 100%;
            background: var(--primary);
            border-radius: 2px;
            width: 0%;
        }

        .video-time {
            font-size: 0.75rem;
            color: white;
            min-width: 45px;
        }

        /* Modals */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            opacity: 0;
            animation: fadeIn 0.3s ease-out forwards;
        }

        .modal {
            background: var(--surface);
            border-radius: 1.5rem;
            border: 1px solid var(--border);
            width: 100%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease-out;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 1rem;
        }

        /* Grid Layouts */
        .grid {
            display: grid;
            gap: 1.5rem;
        }

        .grid-cols-1 { grid-template-columns: repeat(1, 1fr); }
        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }

        @media (min-width: 640px) {
            .sm\:grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        }

        @media (min-width: 768px) {
            .md\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        }

        @media (min-width: 1024px) {
            .lg\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
        }

        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 1rem;
        }

        h1 { font-size: 2.5rem; }
        h2 { font-size: 2rem; }
        h3 { font-size: 1.5rem; }
        h4 { font-size: 1.25rem; }
        h5 { font-size: 1rem; }
        h6 { font-size: 0.875rem; }

        .text-sm { font-size: 0.875rem; }
        .text-xs { font-size: 0.75rem; }
        .text-lg { font-size: 1.125rem; }
        .text-xl { font-size: 1.25rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-3xl { font-size: 1.875rem; }
        .text-4xl { font-size: 2.25rem; }

        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-left { text-align: left; }

        .font-light { font-weight: 300; }
        .font-normal { font-weight: 400; }
        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }

        /* Spacing */
        .p-0 { padding: 0; }
        .p-1 { padding: 0.25rem; }
        .p-2 { padding: 0.5rem; }
        .p-3 { padding: 0.75rem; }
        .p-4 { padding: 1rem; }
        .p-5 { padding: 1.25rem; }
        .p-6 { padding: 1.5rem; }

        .px-1 { padding-left: 0.25rem; padding-right: 0.25rem; }
        .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .px-5 { padding-left: 1.25rem; padding-right: 1.25rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }

        .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
        .py-5 { padding-top: 1.25rem; padding-bottom: 1.25rem; }
        .py-6 { padding-top: 1.5rem; padding-bottom: 1.5rem; }

        .m-0 { margin: 0; }
        .m-1 { margin: 0.25rem; }
        .m-2 { margin: 0.5rem; }
        .m-3 { margin: 0.75rem; }
        .m-4 { margin: 1rem; }
        .m-5 { margin: 1.25rem; }
        .m-6 { margin: 1.5rem; }

        .mx-auto { margin-left: auto; margin-right: auto; }
        .my-auto { margin-top: auto; margin-bottom: auto; }

        /* Flexbox */
        .flex { display: flex; }
        .inline-flex { display: inline-flex; }
        .flex-col { flex-direction: column; }
        .flex-row { flex-direction: row; }
        .flex-wrap { flex-wrap: wrap; }
        .flex-nowrap { flex-wrap: nowrap; }
        .flex-1 { flex: 1 1 0%; }
        .flex-auto { flex: 1 1 auto; }
        .flex-none { flex: none; }
        .flex-grow { flex-grow: 1; }
        .flex-shrink { flex-shrink: 1; }

        .items-start { align-items: flex-start; }
        .items-end { align-items: flex-end; }
        .items-center { align-items: center; }
        .items-baseline { align-items: baseline; }
        .items-stretch { align-items: stretch; }

        .justify-start { justify-content: flex-start; }
        .justify-end { justify-content: flex-end; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .justify-around { justify-content: space-around; }
        .justify-evenly { justify-content: space-evenly; }

        .gap-0 { gap: 0; }
        .gap-1 { gap: 0.25rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-5 { gap: 1.25rem; }
        .gap-6 { gap: 1.5rem; }

        /* Backgrounds & Borders */
        .bg-primary { background-color: var(--primary); }
        .bg-secondary { background-color: var(--secondary); }
        .bg-surface { background-color: var(--surface); }
        .bg-surface-light { background-color: var(--surface-light); }
        .bg-transparent { background-color: transparent; }

        .border { border: 1px solid var(--border); }
        .border-t { border-top: 1px solid var(--border); }
        .border-b { border-bottom: 1px solid var(--border); }
        .border-l { border-left: 1px solid var(--border); }
        .border-r { border-right: 1px solid var(--border); }

        .rounded-none { border-radius: 0; }
        .rounded-sm { border-radius: 0.25rem; }
        .rounded { border-radius: 0.5rem; }
        .rounded-md { border-radius: 0.75rem; }
        .rounded-lg { border-radius: 1rem; }
        .rounded-xl { border-radius: 1.5rem; }
        .rounded-full { border-radius: 9999px; }

        /* Shadows */
        .shadow-sm { box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); }
        .shadow { box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
        .shadow-md { box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); }
        .shadow-lg { box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1); }
        .shadow-xl { box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25); }

        /* Display & Visibility */
        .hidden { display: none; }
        .block { display: block; }
        .inline-block { display: inline-block; }
        .inline { display: inline; }

        .opacity-0 { opacity: 0; }
        .opacity-25 { opacity: 0.25; }
        .opacity-50 { opacity: 0.5; }
        .opacity-75 { opacity: 0.75; }
        .opacity-100 { opacity: 1; }

        .pointer-events-none { pointer-events: none; }
        .pointer-events-auto { pointer-events: auto; }

        .cursor-pointer { cursor: pointer; }
        .cursor-not-allowed { cursor: not-allowed; }

        /* Position */
        .relative { position: relative; }
        .absolute { position: absolute; }
        .fixed { position: fixed; }
        .sticky { position: sticky; }

        .inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
        .inset-x-0 { left: 0; right: 0; }
        .inset-y-0 { top: 0; bottom: 0; }

        .top-0 { top: 0; }
        .right-0 { right: 0; }
        .bottom-0 { bottom: 0; }
        .left-0 { left: 0; }

        .z-0 { z-index: 0; }
        .z-10 { z-index: 10; }
        .z-20 { z-index: 20; }
        .z-30 { z-index: 30; }
        .z-40 { z-index: 40; }
        .z-50 { z-index: 50; }
        .z-100 { z-index: 100; }
        .z-1000 { z-index: 1000; }

        /* Transitions */
        .transition { transition: all 0.2s ease; }
        .transition-all { transition: all 0.2s ease; }
        .transition-transform { transition: transform 0.2s ease; }
        .transition-opacity { transition: opacity 0.2s ease; }
        .transition-colors { transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease; }

        /* Loading States */
        .skeleton {
            background: var(--surface-light);
            border-radius: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .skeleton::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            animation: shimmer 2s infinite;
        }

        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .badge-primary {
            background: rgba(236, 72, 153, 0.1);
            color: var(--primary);
            border: 1px solid rgba(236, 72, 153, 0.2);
        }

        .badge-secondary {
            background: rgba(139, 92, 246, 0.1);
            color: var(--secondary);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .badge-success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .badge-warning {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
            border: 1px solid rgba(245, 158, 11, 0.2);
        }

        .badge-danger {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        /* Notification Bell */
        .notification-bell {
            position: fixed;
            left: 1rem;
            bottom: 5rem;
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            background: var(--surface-light);
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }

        .notification-bell:hover {
            background: var(--surface);
            transform: scale(1.1);
        }

        .notification-badge {
            position: absolute;
            top: -0.25rem;
            right: -0.25rem;
            width: 1.25rem;
            height: 1.25rem;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        /* Gradient Background Effects */
        .gradient-bg-effects {
            position: fixed;
            inset: 0;
            z-index: -1;
            overflow: hidden;
        }

        .gradient-circle {
            position: absolute;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.2;
        }

        .gradient-1 {
            top: -10%;
            right: -10%;
            width: 40%;
            height: 40%;
            background: var(--primary);
        }

        .gradient-2 {
            bottom: -10%;
            left: -10%;
            width: 40%;
            height: 40%;
            background: var(--secondary);
        }

        .gradient-3 {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30%;
            height: 30%;
            background: var(--accent);
        }

        /* Tab Bar */
        .tab-bar {
            display: flex;
            background: var(--surface);
            border-radius: 1rem;
            padding: 0.25rem;
            margin-bottom: 1.5rem;
        }

        .tab-item {
            flex: 1;
            padding: 0.75rem 1rem;
            text-align: center;
            font-weight: 500;
            cursor: pointer;
            border-radius: 0.75rem;
            transition: all 0.2s ease;
        }

        .tab-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .tab-item.active {
            background: var(--gradient);
            color: white;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 0.5rem;
            background: var(--surface-light);
            border-radius: 9999px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient);
            border-radius: 9999px;
            transition: width 0.3s ease;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
        }

        .tooltip:hover .tooltip-content {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .tooltip-content {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            background: var(--surface);
            color: var(--text);
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            z-index: 100;
            border: 1px solid var(--border);
            pointer-events: none;
        }

        .tooltip-content::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 0.5rem solid transparent;
            border-top-color: var(--surface);
        }

        /* Responsive Adjustments */
        @media (max-width: 640px) {
            html { font-size: 14px; }
            .content { padding: 4rem 0 6rem; }
            .grid-cols-2 { grid-template-columns: repeat(1, 1fr); }
            .grid-cols-3 { grid-template-columns: repeat(2, 1fr); }
            .grid-cols-4 { grid-template-columns: repeat(2, 1fr); }
            .modal { margin: 1rem; }
            .video-container { 
                height: 100vh;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                z-index: 1000;
            }
            .video-top-actions { 
                top: 10%;
                right: 0.75rem;
            }
            .video-right-actions { 
                bottom: 4rem;
                right: 0.75rem;
            }
            .video-share-action {
                bottom: 8rem;
                right: 0.75rem;
            }
            .video-overlay {
                padding: 1rem;
            }
            .video-title {
                font-size: 1.25rem;
            }
            .video-description {
                font-size: 0.875rem;
            }
            .top-nav {
                padding: 0.75rem;
            }
            .bottom-nav {
                padding: 0.5rem;
            }
            .nav-item span {
                font-size: 0.625rem;
            }
            .notification-bell {
                bottom: 4rem;
                left: 0.75rem;
                width: 2.5rem;
                height: 2.5rem;
            }
            .pwa-install-btn {
                bottom: 7rem;
                left: 0.75rem;
                width: 2.5rem;
                height: 2.5rem;
            }
        }

        @media (max-width: 480px) {
            html { font-size: 13px; }
            .nav-item span { display: none; }
            .nav-item { min-width: 3rem; }
            .video-top-actions { top: 8%; right: 0.5rem; }
            .video-right-actions { right: 0.5rem; bottom: 3rem; }
            .video-share-action { bottom: 7rem; right: 0.5rem; }
            .action-button {
                width: 2.5rem;
                height: 2.5rem;
            }
            .action-label {
                font-size: 0.625rem;
            }
        }

        /* Mobile Full Screen Video Fix */
        .video-fullscreen-mode {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            z-index: 9999 !important;
            background: #000 !important;
        }

        .video-fullscreen-mode .video-player {
            object-fit: contain !important;
        }

        .video-fullscreen-mode .video-overlay {
            display: none;
        }

        /* Dark/Light Mode (Future Enhancement) */
        @media (prefers-color-scheme: light) {
            :root {
                --background: #ffffff;
                --surface: #f4f4f5;
                --surface-light: #e4e4e7;
                --text: #000000;
                --text-secondary: #71717a;
                --border: #d4d4d8;
                --shadow: rgba(0, 0, 0, 0.1);
            }
        }

        /* RTL Support */
        [dir="rtl"] {
            text-align: right;
        }
        
        /* RTL specific styles */
        body[dir="rtl"] .video-top-actions,
        body[dir="rtl"] .video-right-actions {
            left: 1rem;
            right: auto;
        }
        
        body[dir="rtl"] .notification-bell {
            right: 1rem;
            left: auto;
        }

        /* Print Styles */
        @media print {
            .top-nav, .bottom-nav, .notification-bell {
                display: none !important;
            }
            
            .content {
                padding: 0;
            }
        }
        
        /* Video Item Styles */
        .video-item {
            position: relative;
            border-radius: 1rem;
            overflow: hidden;
            cursor: pointer;
            aspect-ratio: 9/16;
        }
        
        .video-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .video-item:hover img {
            transform: scale(1.05);
        }
        
        .video-item-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 1rem;
            color: white;
        }
        
        .video-item-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
            font-size: 0.875rem;
        }
        
        .video-item-stats {
            display: flex;
            gap: 0.75rem;
            font-size: 0.75rem;
            color: rgba(255,255,255,0.8);
        }
        
        /* Account card without photo */
        .account-card {
            padding: 1.5rem;
            border-radius: 1rem;
            background: var(--surface);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            height: 100%;
        }
        
        .account-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .account-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .account-icon.small {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .account-icon.medium {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .account-icon.big {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }

        /* Upload Video Styles */
        .file-upload-area {
            border: 2px dashed var(--border);
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--surface-light);
        }

        .file-upload-area:hover {
            border-color: var(--primary);
            background: rgba(236, 72, 153, 0.05);
        }

        .file-upload-area.dragover {
            border-color: var(--primary);
            background: rgba(236, 72, 153, 0.1);
        }

        .file-preview {
            margin-top: 1rem;
            display: none;
        }

        .file-preview.active {
            display: block;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--surface);
            border-radius: 0.75rem;
            border: 1px solid var(--border);
        }

        .upload-status {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--surface);
            border-radius: 0.75rem;
            border: 1px solid var(--border);
            display: none;
        }

        .upload-status.active {
            display: block;
        }

        .progress-container {
            margin-top: 0.5rem;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .video-preview {
            width: 100%;
            max-height: 200px;
            border-radius: 0.75rem;
            overflow: hidden;
            margin-top: 1rem;
            display: none;
        }

        .video-preview.active {
            display: block;
        }

        .video-preview video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* PWA Install Modal styles */
        #pwa-install-modal .modal {
            max-width: 450px;
        }

        .pwa-features {
            display: grid;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .pwa-feature {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            background: var(--surface-light);
            border-radius: 0.75rem;
            border: 1px solid var(--border);
        }

        .pwa-feature i {
            font-size: 1.25rem;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
        }

        .pwa-feature:nth-child(1) i {
            background: linear-gradient(135deg, #ec4899, #db2777);
            color: white;
        }

        .pwa-feature:nth-child(2) i {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
        }

        .pwa-feature:nth-child(3) i {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .pwa-feature:nth-child(4) i {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        /* Login/Signup Specific Styles */
        .auth-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .auth-card {
            width: 100%;
            max-width: 400px;
            padding: 2rem;
        }

        .auth-divider {
            display: flex;
            align-items: center;
            margin: 1.5rem 0;
        }

        .auth-divider::before,
        .auth-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border);
        }

        .auth-divider span {
            padding: 0 1rem;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .social-login-btn {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: 0.75rem;
            background: var(--surface-light);
            border: 1px solid var(--border);
            color: var(--text);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .social-login-btn:hover {
            background: var(--surface);
            transform: translateY(-2px);
        }

        .auth-switch {
            text-align: center;
            margin-top: 1.5rem;
            color: var(--text-secondary);
        }

        .auth-switch a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        .auth-switch a:hover {
            text-decoration: underline;
        }

        /* Fix for mobile video playback */
        .video-player-fixed {
            width: 100%;
            height: 100%;
            object-fit: contain;
            background: #000;
        }

        /* Video thumbnail placeholder */
        .video-thumbnail {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }

        .video-thumbnail i {
            font-size: 3rem;
            color: white;
            opacity: 0.8;
        }
        
        /* Video player optimization styles */
        .video-optimized {
            width: 100%;
            height: 100%;
            object-fit: cover;
            background: #000;
        }
        
        .video-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        
        .video-error {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white;
            z-index: 10;
        }
        
        /* Fast upload styles */
        .upload-optimized {
            position: relative;
            width: 100%;
        }
        
        .upload-fast-progress {
            transition: width 0.3s ease;
        }
        
        .upload-speed-info {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        /* NEW: Full screen video button */
        .fullscreen-toggle {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            z-index: 100;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .fullscreen-toggle:hover {
            background: rgba(236, 72, 153, 0.5);
        }

        /* NEW: Mobile video controls */
        .mobile-video-controls {
            display: none;
        }

        @media (max-width: 768px) {
            .mobile-video-controls {
                display: flex;
                position: absolute;
                bottom: 0;
                left: 0;
                right: 0;
                background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
                padding: 1rem;
                z-index: 100;
                justify-content: space-between;
                align-items: center;
            }
        }

        /* Admin access code input styles */
        .access-code-inputs {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin: 1rem 0;
        }

        .access-code-input {
            width: 3rem;
            height: 3rem;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            border: 2px solid var(--border);
            border-radius: 0.5rem;
            background: var(--surface-light);
            color: var(--text);
            transition: all 0.2s ease;
        }

        .access-code-input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1);
        }

        .access-code-input.filled {
            border-color: var(--primary);
            background: rgba(236, 72, 153, 0.1);
        }

        /* Resend timer */
        .resend-timer {
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 0.5rem;
        }

        .resend-timer .countdown {
            color: var(--primary);
            font-weight: 600;
        }
    </style>
</head>
<body>
    <!-- Offline Indicator -->
    <div id="offline-indicator" class="offline-indicator">
        <i class="fas fa-wifi-slash"></i> You are currently offline. Some features may be limited.
    </div>

    <!-- PWA Install Button -->
    <button id="pwa-install-btn" class="pwa-install-btn hidden">
        <i class="fas fa-download"></i>
    </button>

    <!-- Gradient Background Effects -->
    <div class="gradient-bg-effects">
        <div class="gradient-circle gradient-1"></div>
        <div class="gradient-circle gradient-2"></div>
        <div class="gradient-circle gradient-3"></div>
    </div>

    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="nav-content">
            <a href="#home" class="logo" onclick="showPage('home')">
                <div class="logo-icon">
                    <span class="gk-icon" style="font-size: 1rem;">GK</span>
                </div>
                <span class="gradient-text" id="app-title">GK Store</span>
            </a>
            
            <div class="nav-actions">
                <button class="btn btn-icon btn-secondary" onclick="toggleLanguage()">
                    <i class="fas fa-globe"></i>
                </button>
                
                <button class="btn btn-icon btn-secondary" onclick="showAdminLogin()" id="admin-access-btn">
                    <i class="fas fa-user-shield"></i>
                </button>
                
                <button class="btn btn-icon btn-secondary" onclick="toggleTheme()">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <div id="content-container" class="content">
        <!-- Auth Pages (Login/Signup) -->
        <div id="auth-page" class="page">
            <div class="auth-container">
                <div class="auth-card card">
                    <!-- Login Form -->
                    <div id="login-form-container">
                        <div class="text-center mb-6">
                            <div class="w-16 h-16 gradient-bg rounded-2xl flex items-center justify-center mx-auto mb-4">
                                <span class="gk-icon gk-icon-large" style="color: white; font-size: 1.5rem;">GK</span>
                            </div>
                            <h2 class="text-2xl font-bold mb-2" id="login-title">Welcome to GK Store</h2>
                            <p class="text-zinc-400" id="login-subtitle">Sign in to access premium content</p>
                        </div>
                        
                        <form id="login-form" onsubmit="login(event)">
                            <div class="input-group">
                                <label class="input-label" for="login-email">Email Address</label>
                                <input type="email" class="input" id="login-email" placeholder="Enter your email" required>
                            </div>
                            
                            <div class="input-group">
                                <label class="input-label" for="login-password">Password</label>
                                <input type="password" class="input" id="login-password" placeholder="Enter your password" required>
                            </div>
                            
                            <div class="flex items-center justify-between mb-6">
                                <label class="flex items-center cursor-pointer">
                                    <input type="checkbox" id="remember-me" class="mr-2">
                                    <span class="text-sm">Remember me</span>
                                </label>
                                <a href="#forgot-password" class="text-sm text-primary" onclick="showForgotPassword()">Forgot password?</a>
                            </div>
                            
                            <button type="submit" class="btn btn-primary w-full mb-4">
                                <i class="fas fa-sign-in-alt"></i> Sign In
                            </button>
                        </form>
                        
                        <div class="auth-divider">
                            <span>Or sign in with</span>
                        </div>
                        
                        <button class="social-login-btn mb-4" onclick="socialLogin('google')">
                            <i class="fab fa-google text-red-500"></i>
                            <span>Continue with Google</span>
                        </button>
                        
                        <button class="social-login-btn" onclick="socialLogin('apple')">
                            <i class="fab fa-apple"></i>
                            <span>Continue with Apple</span>
                        </button>
                        
                        <div class="auth-switch">
                            <span>Don't have an account?</span>
                            <a href="#signup" onclick="showSignupForm()">Sign up</a>
                        </div>
                    </div>
                    
                    <!-- Signup Form -->
                    <div id="signup-form-container" class="hidden">
                        <div class="text-center mb-6">
                            <div class="w-16 h-16 gradient-bg rounded-2xl flex items-center justify-center mx-auto mb-4">
                                <span class="gk-icon gk-icon-large" style="color: white; font-size: 1.5rem;">GK</span>
                            </div>
                            <h2 class="text-2xl font-bold mb-2">Create Account</h2>
                            <p class="text-zinc-400">Join GK Store for exclusive content</p>
                        </div>
                        
                        <form id="signup-form" onsubmit="signup(event)">
                            <div class="input-group">
                                <label class="input-label" for="signup-name">Full Name</label>
                                <input type="text" class="input" id="signup-name" placeholder="Enter your full name" required>
                            </div>
                            
                            <div class="input-group">
                                <label class="input-label" for="signup-email">Email Address</label>
                                <input type="email" class="input" id="signup-email" placeholder="Enter your email" required>
                            </div>
                            
                            <div class="input-group">
                                <label class="input-label" for="signup-password">Password</label>
                                <input type="password" class="input" id="signup-password" placeholder="Create a password" required>
                            </div>
                            
                            <div class="input-group">
                                <label class="input-label" for="signup-confirm-password">Confirm Password</label>
                                <input type="password" class="input" id="signup-confirm-password" placeholder="Confirm your password" required>
                            </div>
                            
                            <div class="flex items-center mb-6">
                                <input type="checkbox" id="terms-agreement" class="mr-2" required>
                                <label for="terms-agreement" class="text-sm cursor-pointer">
                                    <span>I agree to the</span>
                                    <a href="#terms" class="text-primary" onclick="showTerms()"> Terms of Service</a>
                                    <span> and</span>
                                    <a href="#privacy" class="text-primary" onclick="showPrivacy()"> Privacy Policy</a>
                                </label>
                            </div>
                            
                            <button type="submit" class="btn btn-primary w-full mb-4">
                                <i class="fas fa-user-plus"></i> Create Account
                            </button>
                        </form>
                        
                        <div class="auth-divider">
                            <span>Or sign up with</span>
                        </div>
                        
                        <button class="social-login-btn mb-4" onclick="socialLogin('google')">
                            <i class="fab fa-google text-red-500"></i>
                            <span>Continue with Google</span>
                        </button>
                        
                        <button class="social-login-btn" onclick="socialLogin('apple')">
                            <i class="fab fa-apple"></i>
                            <span>Continue with Apple</span>
                        </button>
                        
                        <div class="auth-switch">
                            <span>Already have an account?</span>
                            <a href="#login" onclick="showLoginForm()">Sign in</a>
                        </div>
                    </div>
                    
                    <!-- Forgot Password Form -->
                    <div id="forgot-password-container" class="hidden">
                        <div class="text-center mb-6">
                            <div class="w-16 h-16 gradient-bg rounded-2xl flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-lock text-white text-2xl"></i>
                            </div>
                            <h2 class="text-2xl font-bold mb-2">Reset Password</h2>
                            <p class="text-zinc-400">Enter your email to reset your password</p>
                        </div>
                        
                        <form id="forgot-password-form" onsubmit="resetPassword(event)">
                            <div class="input-group">
                                <label class="input-label" for="reset-email">Email Address</label>
                                <input type="email" class="input" id="reset-email" placeholder="Enter your email" required>
                            </div>
                            
                            <button type="submit" class="btn btn-primary w-full mb-4">
                                <i class="fas fa-paper-plane"></i> Send Reset Link
                            </button>
                        </form>
                        
                        <div class="auth-switch">
                            <a href="#login" onclick="showLoginForm()"> Back to login</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Home Page - UPDATED FOR SINGLE VIDEO PLAYER -->
        <div id="home-page" class="page animate-fade-in hidden">
            <!-- Main Video Player Section - Will be displayed on all devices -->
            <div id="main-video-container" class="video-container">
                <!-- Video will be dynamically loaded here -->
                <div id="video-placeholder" class="flex items-center justify-center h-full">
                    <div class="text-center">
                        <div class="w-16 h-16 border-4 border-transparent border-t-pink-500 border-r-violet-500 rounded-full animate-spin mx-auto mb-4"></div>
                        <p class="text-zinc-400" id="loading-text">Loading premium content...</p>
                    </div>
                </div>
            </div>
            
            <!-- Video Grid - Only shown on desktop, hidden on mobile -->
            <div id="video-grid-desktop" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-6 hidden">
                <!-- Video items will be dynamically loaded here -->
            </div>
            
            <!-- Loading More Indicator -->
            <div id="loading-more" class="hidden text-center py-8">
                <div class="w-8 h-8 border-2 border-transparent border-t-pink-500 border-r-violet-500 rounded-full animate-spin mx-auto"></div>
                <p class="text-zinc-400 mt-2">Loading more videos...</p>
            </div>
        </div>

        <!-- Accounts Page -->
        <div id="accounts-page" class="page hidden">
            <h2 class="text-2xl font-bold mb-6">Premium Accounts</h2>
            
            <div class="tab-bar mb-6">
                <div class="tab-item active" onclick="filterAccounts('all')">All</div>
                <div class="tab-item" onclick="filterAccounts('small')">Small</div>
                <div class="tab-item" onclick="filterAccounts('medium')">Medium</div>
                <div class="tab-item" onclick="filterAccounts('big')">Big</div>
            </div>
            
            <div id="accounts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Account cards will be dynamically loaded here -->
            </div>
        </div>

        <!-- Profile Page -->
        <div id="profile-page" class="page hidden">
            <div class="flex flex-col items-center mb-8">
                <div class="w-24 h-24 rounded-full gradient-bg flex items-center justify-center text-2xl font-bold mb-4">
                    <span class="gk-icon gk-icon-large">GK</span>
                </div>
                <h2 class="text-2xl font-bold">User Profile</h2>
                <p class="text-zinc-400">Premium Member</p>
            </div>
            
            <div class="grid gap-4">
                <div class="card">
                    <div class="card-body">
                        <h3 class="font-semibold mb-4">Account Information</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-zinc-400">Name</span>
                                <span id="user-name">John Doe</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-zinc-400">Email</span>
                                <span id="user-email">john@example.com</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-zinc-400">Member Since</span>
                                <span id="member-since">Jan 2024</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-zinc-400">Account Type</span>
                                <span class="badge badge-primary">Premium</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h3 class="font-semibold mb-4">Statistics</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="text-center p-4 bg-surface-light rounded-lg">
                                <div class="text-2xl font-bold gradient-text" id="videos-watched-count">0</div>
                                <div class="text-sm text-zinc-400">Videos Watched</div>
                            </div>
                            <div class="text-center p-4 bg-surface-light rounded-lg">
                                <div class="text-2xl font-bold gradient-text" id="accounts-booked-count">0</div>
                                <div class="text-sm text-zinc-400">Accounts Booked</div>
                            </div>
                            <div class="text-center p-4 bg-surface-light rounded-lg">
                                <div class="text-2xl font-bold gradient-text" id="watch-time-count">0h</div>
                                <div class="text-sm text-zinc-400">Watch Time</div>
                            </div>
                            <div class="text-center p-4 bg-surface-light rounded-lg">
                                <div class="text-2xl font-bold gradient-text" id="purchases-count">0</div>
                                <div class="text-sm text-zinc-400">Purchases</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-secondary w-full" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>

        <!-- Contact Page -->
        <div id="contact-page" class="page hidden">
            <h2 class="text-2xl font-bold mb-6">Contact Us</h2>
            
            <div class="grid gap-6">
                <div class="card">
                    <div class="card-body">
                        <div class="flex items-center gap-4 mb-4">
                            <div class="w-12 h-12 rounded-full gradient-bg flex items-center justify-center">
                                <i class="fas fa-whatsapp text-white"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold">WhatsApp Support</h3>
                                <p class="text-zinc-400">+93 793066322</p>
                            </div>
                        </div>
                        <button class="btn btn-primary w-full" onclick="openWhatsApp()">
                            <i class="fab fa-whatsapp"></i> Chat Now
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <div class="flex items-center gap-4 mb-4">
                            <div class="w-12 h-12 rounded-full bg-amber-500 flex items-center justify-center">
                                <i class="fas fa-wallet text-white"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold">USDT Address (TRC20)</h3>
                                <p class="text-zinc-400 text-sm">Send payment to this address</p>
                            </div>
                        </div>
                        <div class="bg-surface-light p-3 rounded-lg mb-4">
                            <code id="usdt-address" class="text-sm break-all">TYpeauzqbVusejMAhJPnXuSb7wY6p69ZoY</code>
                        </div>
                        <button class="btn btn-secondary w-full" onclick="copyUSDTAddress()">
                            <i class="far fa-copy"></i> Copy Address
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h3 class="font-semibold mb-4">Send Message</h3>
                        <form id="contact-form" onsubmit="sendContactMessage(event)">
                            <div class="input-group">
                                <label class="input-label">Your Name</label>
                                <input type="text" class="input" placeholder="Enter your name" required>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Email Address</label>
                                <input type="email" class="input" placeholder="Enter your email" required>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Message</label>
                                <textarea class="input textarea" placeholder="Type your message here..." required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary w-full">
                                <i class="fas fa-paper-plane"></i> Send Message
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Page -->
        <div id="admin-page" class="page hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Admin Panel</h2>
                <button class="btn btn-sm btn-danger" onclick="adminLogout()">
                    <i class="fas fa-sign-out-alt"></i> Logout Admin
                </button>
            </div>
            
            <div class="grid gap-6">
                <!-- Admin Dashboard (Hidden until login) -->
                <div id="admin-dashboard" class="hidden">
                    <!-- Stats Overview -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                        <div class="card">
                            <div class="card-body text-center">
                                <div class="text-2xl font-bold gradient-text" id="admin-video-count">0</div>
                                <div class="text-sm text-zinc-400">Total Videos</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body text-center">
                                <div class="text-2xl font-bold gradient-text" id="admin-registered-users">0</div>
                                <div class="text-sm text-zinc-400">Registered Users</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body text-center">
                                <div class="text-2xl font-bold gradient-text" id="admin-online-users">1</div>
                                <div class="text-sm text-zinc-400">Online Users</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body text-center">
                                <div class="text-2xl font-bold gradient-text" id="admin-sold-count">0</div>
                                <div class="text-sm text-zinc-400">Sold Accounts</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="card mb-6">
                        <div class="card-body">
                            <h3 class="font-semibold mb-4">Quick Actions</h3>
                            <div class="grid grid-cols-1 gap-3">
                                <button class="btn btn-secondary" onclick="showManageVideos()">
                                    <i class="fas fa-video"></i> Manage Videos
                                </button>
                                <button class="btn btn-secondary" onclick="showUploadVideo()">
                                    <i class="fas fa-upload"></i> Upload Video
                                </button>
                                <button class="btn btn-secondary" onclick="showBookRequests()">
                                    <i class="fas fa-bookmark"></i> Book Requests
                                </button>
                                <button class="btn btn-secondary" onclick="showManageSettings()">
                                    <i class="fas fa-cog"></i> Settings
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Activity -->
                    <div class="card">
                        <div class="card-body">
                            <h3 class="font-semibold mb-4">Recent Activity</h3>
                            <div class="space-y-3" id="admin-recent-activity">
                                <!-- Activity items will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Admin Login Required Message -->
                <div id="admin-login-required" class="text-center py-12">
                    <div class="w-24 h-24 gradient-bg rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-lock text-white text-3xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Admin Access Required</h3>
                    <p class="text-zinc-400 mb-6">Please login with admin credentials to access this panel</p>
                    <button class="btn btn-primary" onclick="showAdminLogin()">
                        <i class="fas fa-sign-in-alt"></i> Admin Login
                    </button>
                </div>
            </div>
        </div>

        <!-- Notifications Page -->
        <div id="notifications-page" class="page hidden">
            <h2 class="text-2xl font-bold mb-6">Notifications</h2>
            
            <div id="notifications-list" class="space-y-3">
                <!-- Notifications will be dynamically loaded here -->
            </div>
            
            <div id="notifications-empty" class="hidden text-center py-12">
                <i class="far fa-bell text-4xl text-zinc-600 mb-4"></i>
                <h3 class="text-xl font-semibold mb-2">No Notifications</h3>
                <p class="text-zinc-400">You're all caught up!</p>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-items">
            <a href="#accounts" class="nav-item" onclick="showPage('accounts')">
                <i class="fas fa-shopping-bag"></i>
                <span>Accounts</span>
            </a>
            
            <a href="#home" class="nav-item active" onclick="showPage('home')">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
            
            <a href="#profile" class="nav-item" onclick="showPage('profile')">
                <i class="far fa-user"></i>
                <span>Profile</span>
            </a>
            
            <a href="#contact" class="nav-item" onclick="showPage('contact')">
                <i class="fas fa-headset"></i>
                <span>Contact</span>
            </a>
        </div>
    </nav>

    <!-- Notification Bell -->
    <div class="notification-bell" onclick="showPage('notifications')">
        <i class="far fa-bell"></i>
        <div id="notification-count" class="notification-badge hidden">0</div>
    </div>

    <!-- PWA Install Modal -->
    <div id="pwa-install-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Install GK Store App</h3>
                <button class="modal-close" onclick="closeModal('pwa-install-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="text-center mb-4">
                    <div class="w-20 h-20 gradient-bg rounded-2xl flex items-center justify-center mx-auto mb-4">
                        <span class="gk-icon gk-icon-large" style="color: white; font-size: 2rem;">GK</span>
                    </div>
                    <h4 class="text-lg font-semibold">Install GK Store App</h4>
                    <p class="text-zinc-400 mt-1">Get the best experience with our app</p>
                </div>
                
                <div class="pwa-features">
                    <div class="pwa-feature">
                        <i class="fas fa-bolt"></i>
                        <div>
                            <h5 class="font-medium">Fast Loading</h5>
                            <p class="text-xs text-zinc-400">Instant access to your content</p>
                        </div>
                    </div>
                    <div class="pwa-feature">
                        <i class="fas fa-wifi-slash"></i>
                        <div>
                            <h5 class="font-medium">Offline Access</h5>
                            <p class="text-xs text-zinc-400">Use without internet connection</p>
                        </div>
                    </div>
                    <div class="pwa-feature">
                        <i class="fas fa-mobile-alt"></i>
                        <div>
                            <h5 class="font-medium">Home Screen</h5>
                            <p class="text-xs text-zinc-400">Quick access from your home screen</p>
                        </div>
                    </div>
                    <div class="pwa-feature">
                        <i class="fas fa-bell"></i>
                        <div>
                            <h5 class="font-medium">Push Notifications</h5>
                            <p class="text-xs text-zinc-400">Get updates about new content</p>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button class="btn btn-secondary flex-1" onclick="closeModal('pwa-install-modal')">
                        Not Now
                    </button>
                    <button class="btn btn-primary flex-1" id="pwa-install-confirm">
                        <i class="fas fa-download"></i> Install App
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div id="welcome-modal" class="modal-overlay">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-body">
                <div class="text-center">
                    <div class="w-20 h-20 gradient-bg rounded-2xl flex items-center justify-center mx-auto mb-6">
                        <span class="gk-icon gk-icon-large" style="color: white; font-size: 2rem;">GK</span>
                    </div>
                    
                    <h2 class="text-2xl font-bold mb-4">Welcome to GK Store!</h2>
                    
                    <p class="text-zinc-400 mb-6">
                        Your exclusive gateway to premium video content and accounts marketplace
                    </p>
                    
                    <div class="grid gap-3 mb-8">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-play-circle text-primary"></i>
                            <span>Swipe through exclusive videos</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <i class="fas fa-bookmark text-secondary"></i>
                            <span>Book accounts you're interested in</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <i class="fas fa-shopping-bag text-accent"></i>
                            <span>Buy directly with USDT</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <i class="fas fa-globe text-success"></i>
                            <span>Available in multiple languages</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <i class="fas fa-download text-pink-500"></i>
                            <span>Install as app for better experience</span>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary w-full" onclick="closeWelcomeModal()">
                        <span>Get Started</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                    
                    <p class="text-xs text-zinc-500 mt-4">
                        Swipe up/down or use arrow keys to navigate videos
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Book Account Modal -->
    <div id="book-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Book Account</h3>
                <button class="modal-close" onclick="closeModal('book-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="card glass-effect p-4 mb-4">
                    <h4 id="book-account-name" class="font-semibold mb-1"></h4>
                    <p id="book-account-tier" class="badge badge-secondary text-xs"></p>
                    <p id="book-account-price" class="text-lg font-bold mt-2"></p>
                </div>
                
                <form id="book-form">
                    <div class="input-group">
                        <label class="input-label">Your Full Name</label>
                        <input type="text" class="input" id="book-name" placeholder="Enter your name" required>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">WhatsApp Number</label>
                        <input type="tel" class="input" id="book-whatsapp" placeholder="+93 793066322" required>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">Additional Notes (Optional)</label>
                        <textarea class="input textarea" id="book-notes" placeholder="Any special requests or questions..."></textarea>
                    </div>
                </form>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary flex-1" onclick="closeModal('book-modal')">Cancel</button>
                <button class="btn btn-primary flex-1" onclick="submitBookRequest()">
                    <i class="fas fa-paper-plane"></i> Submit Request
                </button>
            </div>
        </div>
    </div>

    <!-- Buy Now Modal -->
    <div id="buy-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Buy Now with USDT</h3>
                <button class="modal-close" onclick="closeModal('buy-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="card glass-effect p-4 mb-4">
                    <h4 id="buy-account-name" class="font-semibold mb-1"></h4>
                    <p id="buy-account-tier" class="badge badge-secondary text-xs"></p>
                    <p id="buy-account-price" class="text-2xl font-bold mt-2"></p>
                </div>
                
                <div class="mb-6">
                    <h4 class="font-semibold mb-3">Payment Instructions</h4>
                    <ol class="space-y-2 text-sm">
                        <li class="flex items-start gap-2">
                            <span class="badge badge-primary">1</span>
                            <span>Send <span id="payment-amount" class="font-semibold"></span> USDT to the address below</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="badge badge-primary">2</span>
                            <span>Use TRC20 network only</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="badge badge-primary">3</span>
                            <span>Contact us on WhatsApp with transaction ID</span>
                        </li>
                    </ol>
                </div>
                
                <div class="bg-surface-light p-4 rounded-lg mb-4">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm text-zinc-400">USDT Address (TRC20)</span>
                        <button class="btn btn-sm btn-secondary" onclick="copyAddress()">
                            <i class="far fa-copy"></i> Copy
                        </button>
                    </div>
                    <code id="payment-address" class="text-sm break-all font-mono">TYpeauzqbVusejMAhJPnXuSb7wY6p69ZoY</code>
                </div>
                
                <div class="text-center">
                    <button class="btn btn-primary w-full mb-3" onclick="openPaymentChat()">
                        <i class="fab fa-whatsapp"></i> Confirm Payment on WhatsApp
                    </button>
                    <p class="text-xs text-zinc-400">After sending payment, contact us to confirm</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="admin-login-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Admin Access</h3>
                <button class="modal-close" onclick="closeModal('admin-login-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <!-- Step 1: Email Login -->
                <div id="admin-login-step1">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 gradient-bg rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-lock text-white text-2xl"></i>
                        </div>
                        <h4 class="text-lg font-semibold">Admin Authentication</h4>
                        <p class="text-zinc-400 text-sm mt-1">Enter your admin email to begin</p>
                    </div>
                    
                    <form id="admin-login-form">
                        <div class="input-group">
                            <label class="input-label">Admin Email</label>
                            <input type="email" id="admin-email" class="input" placeholder="admin@example.com" required>
                        </div>
                        
                        <button type="submit" class="btn btn-primary w-full mt-4">
                            <i class="fas fa-envelope"></i> Send Access Code
                        </button>
                    </form>
                </div>
                
                <!-- Step 2: Access Code Verification -->
                <div id="admin-login-step2" class="hidden">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 gradient-bg rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-key text-white text-2xl"></i>
                        </div>
                        <h4 class="text-lg font-semibold">Enter Access Code</h4>
                        <p class="text-zinc-400 text-sm mt-1">Check your email for the access code</p>
                    </div>
                    
                    <div class="text-center mb-4">
                        <p class="text-sm" id="admin-email-display"></p>
                    </div>
                    
                    <form id="admin-verify-form">
                        <div class="input-group">
                            <label class="input-label">6-Digit Access Code</label>
                            <div class="access-code-inputs">
                                <input type="text" id="code1" class="access-code-input" maxlength="1" onkeyup="moveToNext(1, event)" required>
                                <input type="text" id="code2" class="access-code-input" maxlength="1" onkeyup="moveToNext(2, event)" required>
                                <input type="text" id="code3" class="access-code-input" maxlength="1" onkeyup="moveToNext(3, event)" required>
                                <input type="text" id="code4" class="access-code-input" maxlength="1" onkeyup="moveToNext(4, event)" required>
                                <input type="text" id="code5" class="access-code-input" maxlength="1" onkeyup="moveToNext(5, event)" required>
                                <input type="text" id="code6" class="access-code-input" maxlength="1" onkeyup="moveToNext(6, event)" required>
                            </div>
                            <p class="text-xs text-zinc-400 mt-2 text-center">Enter the 6-digit code sent to your email</p>
                        </div>
                        
                        <div class="flex gap-2 mt-4">
                            <button type="button" class="btn btn-secondary flex-1" onclick="backToEmailStep()">
                                <i class="fas fa-arrow-left"></i> Back
                            </button>
                            <button type="submit" class="btn btn-primary flex-1">
                                <i class="fas fa-check"></i> Verify Code
                            </button>
                        </div>
                        
                        <div class="text-center mt-4">
                            <button type="button" class="text-sm text-primary" onclick="resendAccessCode()" id="resend-code-btn">
                                Resend Code
                            </button>
                            <p class="resend-timer" id="resend-timer"></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Language Selector -->
    <div id="language-modal" class="modal-overlay hidden">
        <div class="modal" style="max-width: 300px;">
            <div class="modal-header">
                <h3 class="modal-title">Select Language</h3>
                <button class="modal-close" onclick="closeModal('language-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body p-0">
                <div class="space-y-1">
                    <button class="w-full p-4 text-left hover:bg-surface-light transition-colors flex items-center justify-between" onclick="setLanguage('en')">
                        <span> English</span>
                        <i id="lang-en-check" class="fas fa-check text-primary"></i>
                    </button>
                    <button class="w-full p-4 text-left hover:bg-surface-light transition-colors flex items-center justify-between" onclick="setLanguage('ps')">
                        <span>  (Pashto)</span>
                        <i id="lang-ps-check" class="fas fa-check text-primary hidden"></i>
                    </button>
                    <button class="w-full p-4 text-left hover:bg-surface-light transition-colors flex items-center justify-between" onclick="setLanguage('fa')">
                        <span>  (Farsi)</span>
                        <i id="lang-fa-check" class="fas fa-check text-primary hidden"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Video Modal -->
    <div id="upload-video-modal" class="modal-overlay hidden">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <h3 class="modal-title">Upload New Video</h3>
                <button class="modal-close" onclick="closeModal('upload-video-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="upload-video-form">
                    <!-- Video ID -->
                    <div class="input-group">
                        <label class="input-label">Video ID <span class="text-danger">*</span></label>
                        <input type="text" class="input" id="video-id" placeholder="Unique ID (e.g., vid_001)" required>
                    </div>
                    
                    <!-- Video Title -->
                    <div class="input-group">
                        <label class="input-label">Video Title <span class="text-danger">*</span></label>
                        <input type="text" class="input" id="video-title-input" placeholder="Enter video title" required>
                    </div>
                    
                    <!-- Description -->
                    <div class="input-group">
                        <label class="input-label">Description</label>
                        <textarea class="input textarea" id="video-description-input" placeholder="Enter video description"></textarea>
                    </div>
                    
                    <!-- Price -->
                    <div class="input-group">
                        <label class="input-label">Price ($) <span class="text-danger">*</span></label>
                        <input type="number" class="input" id="video-price" placeholder="0.00" min="0" step="0.01" required>
                    </div>
                    
                    <!-- Account Tier -->
                    <div class="input-group">
                        <label class="input-label">Account Tier <span class="text-danger">*</span></label>
                        <select class="input" id="video-tier" required>
                            <option value="">Select Tier</option>
                            <option value="small">Small</option>
                            <option value="medium">Medium</option>
                            <option value="big">Big</option>
                        </select>
                    </div>
                    
                    <!-- Video URL -->
                    <div class="input-group">
                        <label class="input-label">Video URL <span class="text-danger">*</span></label>
                        <input type="url" class="input" id="video-url-input" placeholder="https://example.com/video.mp4" required>
                        <p class="text-xs text-zinc-400 mt-1">Enter direct URL to video file (MP4 format recommended)</p>
                    </div>
                    
                    <!-- File Upload Section (Alternative) -->
                    <div class="input-group">
                        <label class="input-label">Or Upload Video File <span class="text-zinc-400">(Alternative)</span></label>
                        <div class="file-upload-area" id="file-upload-area" onclick="document.getElementById('video-file').click()">
                            <i class="fas fa-cloud-upload-alt text-3xl text-primary mb-2"></i>
                            <p class="font-medium">Click to select video</p>
                            <p class="text-sm text-zinc-400 mt-1">MP4 format recommended (max 100MB)</p>
                            <input type="file" id="video-file" accept="video/*" class="hidden" onchange="handleFileSelect(event)">
                        </div>
                    </div>
                    
                    <!-- Upload Status -->
                    <div id="upload-status" class="upload-status">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium">Uploading...</span>
                            <span id="upload-percentage">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div id="upload-progress" class="progress-fill" style="width: 0%"></div>
                        </div>
                        <div class="progress-text">
                            <span id="uploaded-size">0 MB</span>
                            <span id="total-size">0 MB</span>
                        </div>
                    </div>
                    
                    <button type="button" class="btn btn-primary w-full" onclick="uploadVideo()">
                        <i class="fas fa-upload"></i> Add Video
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Admin Modals -->
    <!-- Manage Videos Modal -->
    <div id="manage-videos-modal" class="modal-overlay hidden">
        <div class="modal" style="max-width: 600px; max-height: 80vh;">
            <div class="modal-header">
                <h3 class="modal-title">Manage Videos</h3>
                <button class="modal-close" onclick="closeModal('manage-videos-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="tab-bar mb-4">
                    <div class="tab-item active" onclick="adminFilterVideos('all')">All Videos</div>
                    <div class="tab-item" onclick="adminFilterVideos('small')">Small Tier</div>
                    <div class="tab-item" onclick="adminFilterVideos('medium')">Medium Tier</div>
                    <div class="tab-item" onclick="adminFilterVideos('big')">Big Tier</div>
                </div>
                
                <div id="admin-videos-list" class="space-y-3 max-h-96 overflow-y-auto">
                    <!-- Videos will be loaded here -->
                </div>
                
                <div class="mt-4 pt-4 border-t border-border">
                    <button class="btn btn-primary w-full" onclick="closeModal('manage-videos-modal')">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Book Requests Modal -->
    <div id="book-requests-modal" class="modal-overlay hidden">
        <div class="modal" style="max-width: 600px; max-height: 80vh;">
            <div class="modal-header">
                <h3 class="modal-title">Book Requests</h3>
                <button class="modal-close" onclick="closeModal('book-requests-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="admin-book-requests-list" class="space-y-3 max-h-96 overflow-y-auto">
                    <!-- Book requests will be loaded here -->
                </div>
                
                <div id="admin-book-requests-empty" class="hidden text-center py-8">
                    <i class="fas fa-inbox text-4xl text-zinc-600 mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">No Book Requests</h3>
                    <p class="text-zinc-400">No pending book requests at the moment</p>
                </div>
                
                <div class="mt-4 pt-4 border-t border-border">
                    <button class="btn btn-primary w-full" onclick="closeModal('book-requests-modal')">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Manage Settings Modal -->
    <div id="manage-settings-modal" class="modal-overlay hidden">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <h3 class="modal-title">Manage Settings</h3>
                <button class="modal-close" onclick="closeModal('manage-settings-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="space-y-4">
                    <div>
                        <label class="input-label">Admin Password</label>
                        <input type="password" class="input" id="new-admin-password" placeholder="Change admin password">
                    </div>
                    <div>
                        <label class="input-label">USDT Address</label>
                        <input type="text" class="input" id="new-usdt-address" placeholder="Update USDT address">
                    </div>
                    <div>
                        <label class="input-label">WhatsApp Number</label>
                        <input type="tel" class="input" id="new-whatsapp-number" placeholder="Update WhatsApp number">
                    </div>
                </div>
                <button class="btn btn-primary w-full mt-4" onclick="saveAdminSettings()">
                    Save Changes
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-4 right-4 z-2000 hidden">
        <div class="bg-surface border border-border rounded-lg shadow-xl p-4 max-w-sm animate-fade-in">
            <div class="flex items-start gap-3">
                <i id="toast-icon" class="fas fa-check-circle text-success mt-0.5"></i>
                <div class="flex-1">
                    <h4 id="toast-title" class="font-semibold"></h4>
                    <p id="toast-message" class="text-sm text-zinc-400"></p>
                </div>
                <button class="text-zinc-400 hover:text-white" onclick="hideToast()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // ===========================================
        // SUPABASE CONFIGURATION
        // ===========================================
        const SUPABASE_URL = 'https://ieinqlpnubtwwkldqhab.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImllaW5xbHBudWJ0d3drbGRxaGFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA1MzA3ODcsImV4cCI6MjA4NjEwNjc4N30.sJsoTu1bHBgconNOPfXZk33Ttuy1ZKC2oW2SonBnQ4o';
        
        // Initialize Supabase client
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // ===========================================
        // APP STATE MANAGEMENT
        // ===========================================
        const appState = {
            currentPage: 'auth',
            currentVideoIndex: 0,
            videos: [],
            accounts: [],
            notifications: [],
            bookRequests: [],
            language: 'en',
            theme: 'dark',
            isLoggedIn: false,
            currentUser: null,
            currentAccount: null,
            isAdminLoggedIn: false,
            userStats: {
                registeredUsers: 0,
                onlineUsers: 0
            },
            currentUpload: {
                file: null,
                progress: 0,
                url: ''
            },
            // Video optimization state
            videoPlayers: new Map(),
            currentVideoPlayer: null,
            isVideoPlaying: false,
            isFullscreen: false,
            // Device detection
            isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 768
        };

        // Admin Authentication State
        const adminAuth = {
            currentEmail: '',
            accessCode: '',
            resendTimer: null,
            resendCooldown: 60, // 60 seconds cooldown
            lastSent: 0,
            
            // Generate 6-digit code
            generateAccessCode() {
                return Math.floor(100000 + Math.random() * 900000).toString();
            },
            
            // Check if can resend
            canResend() {
                const now = Date.now();
                return now - this.lastSent >= this.resendCooldown * 1000;
            },
            
            // Start resend timer
            startResendTimer() {
                let seconds = this.resendCooldown;
                const timerElement = document.getElementById('resend-timer');
                const resendBtn = document.getElementById('resend-code-btn');
                
                if (resendBtn) resendBtn.disabled = true;
                
                this.resendTimer = setInterval(() => {
                    seconds--;
                    
                    if (timerElement) {
                        timerElement.innerHTML = `Resend available in <span class="countdown">${seconds}s</span>`;
                    }
                    
                    if (seconds <= 0) {
                        clearInterval(this.resendTimer);
                        if (timerElement) timerElement.innerHTML = '';
                        if (resendBtn) {
                            resendBtn.disabled = false;
                            resendBtn.textContent = 'Resend Code';
                        }
                    }
                }, 1000);
            },
            
            // Clear timer
            clearTimer() {
                if (this.resendTimer) {
                    clearInterval(this.resendTimer);
                    this.resendTimer = null;
                }
            }
        };

        // Rate limiting for access code requests
        const rateLimit = {
            attempts: {},
            maxAttempts: 5,
            timeWindow: 15 * 60 * 1000, // 15 minutes
            
            check(email) {
                const now = Date.now();
                const userAttempts = this.attempts[email] || [];
                
                // Clean old attempts
                const recentAttempts = userAttempts.filter(time => now - time < this.timeWindow);
                
                if (recentAttempts.length >= this.maxAttempts) {
                    return false;
                }
                
                recentAttempts.push(now);
                this.attempts[email] = recentAttempts;
                return true;
            }
        };

        // PWA Variables
        let deferredPrompt = null;
        let isAppInstalled = false;

        // ===========================================
        // INITIALIZATION
        // ===========================================
        async function initApp() {
            loadPreferences();
            setupEventListeners();
            setupPWAInstall();
            
            // Create necessary Supabase tables
            await createSupabaseTables();
            
            // Check if user is already logged in
            const savedUser = localStorage.getItem('gkStoreUser');
            const adminToken = localStorage.getItem('adminToken');
            
            if (savedUser) {
                try {
                    appState.currentUser = JSON.parse(savedUser);
                    appState.isLoggedIn = true;
                    
                    // Check if admin was logged in
                    if (adminToken && adminToken === 'authenticated') {
                        appState.isAdminLoggedIn = true;
                        updateAdminButton();
                    }
                    
                    showPage('home');
                    await loadInitialData();
                } catch (e) {
                    console.error('Error parsing saved user:', e);
                    showPage('auth');
                }
            } else {
                showPage('auth');
            }
            
            // Initialize video optimization
            initializeVideoOptimization();
            
            // Handle orientation changes
            if (appState.isMobile) {
                window.addEventListener('orientationchange', handleOrientationChange);
            }
        }

        // Create Supabase tables
        async function createSupabaseTables() {
            try {
                // Create admin_access_codes table
                const { error: codesError } = await supabase.rpc('create_admin_tables');
                if (codesError) {
                    console.log('Creating tables manually...');
                    await createTablesManually();
                }
            } catch (error) {
                console.log('Creating tables with direct SQL...');
                await createTablesManually();
            }
        }

        // Create tables manually
        async function createTablesManually() {
            try {
                // Create admin_users table
                await supabase.from('admin_users').select('*').limit(1);
            } catch (error) {
                console.log('Admin users table may not exist. Creating dummy data...');
            }
        }

        // ===========================================
        // ADMIN AUTHENTICATION FUNCTIONS
        // ===========================================
        
        // Show admin login modal
        function showAdminLogin() {
            // Reset form
            document.getElementById('admin-login-step1').classList.remove('hidden');
            document.getElementById('admin-login-step2').classList.add('hidden');
            document.getElementById('admin-email').value = '';
            clearAccessCodeInputs();
            
            adminAuth.clearTimer();
            showModal('admin-login-modal');
        }

        // Handle admin email submission
        async function handleAdminEmailSubmit(event) {
            event.preventDefault();
            
            const email = document.getElementById('admin-email').value.trim();
            const submitBtn = event.target.querySelector('button[type="submit"]');
            
            if (!email) {
                showToast('error', 'Validation Error', 'Please enter admin email');
                return;
            }
            
            // Check rate limit
            if (!rateLimit.check(email)) {
                showToast('error', 'Rate Limit Exceeded', 'Too many attempts. Please wait 15 minutes.');
                return;
            }
            
            // Show loading
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner animate-spin"></i> Sending...';
            
            try {
                // Check if email is registered as admin
                const { data: adminData, error: adminError } = await supabase
                    .from('admin_users')
                    .select('email')
                    .eq('email', email)
                    .single();
                
                if (adminError || !adminData) {
                    showToast('error', 'Access Denied', 'This email is not registered as admin');
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-envelope"></i> Send Access Code';
                    return;
                }
                
                // Generate and send access code
                const accessCode = adminAuth.generateAccessCode();
                adminAuth.currentEmail = email;
                adminAuth.accessCode = accessCode;
                adminAuth.lastSent = Date.now();
                
                // Store code in localStorage for demo (in production, use Supabase Edge Functions)
                localStorage.setItem(`admin_code_${email}`, JSON.stringify({
                    code: accessCode,
                    expires: Date.now() + 10 * 60000 // 10 minutes
                }));
                
                // Simulate sending email (in production, use Supabase Edge Functions)
                setTimeout(() => {
                    // Show code input step
                    document.getElementById('admin-login-step1').classList.add('hidden');
                    document.getElementById('admin-login-step2').classList.remove('hidden');
                    document.getElementById('admin-email-display').textContent = `Code sent to: ${email}`;
                    
                    // Start resend timer
                    adminAuth.startResendTimer();
                    
                    showToast('success', 'Access Code Sent', `Demo code: ${accessCode} (Check console for production)`);
                    console.log('DEMO: Access code for', email, 'is:', accessCode);
                    console.log('IN PRODUCTION: This would be sent via email using Supabase Edge Functions');
                    
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-envelope"></i> Send Access Code';
                }, 1500);
                
            } catch (error) {
                console.error('Admin login error:', error);
                showToast('error', 'Login Error', 'An error occurred. Please try again.');
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-envelope"></i> Send Access Code';
            }
        }

        // Handle access code verification
        async function handleAccessCodeVerify(event) {
            event.preventDefault();
            
            const code = [
                document.getElementById('code1').value,
                document.getElementById('code2').value,
                document.getElementById('code3').value,
                document.getElementById('code4').value,
                document.getElementById('code5').value,
                document.getElementById('code6').value
            ].join('');
            
            const submitBtn = event.target.querySelector('button[type="submit"]');
            
            if (code.length !== 6 || !/^\d+$/.test(code)) {
                showToast('error', 'Invalid Code', 'Please enter a valid 6-digit code');
                return;
            }
            
            // Show loading
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner animate-spin"></i> Verifying...';
            
            try {
                // Check if code matches
                const storedCode = localStorage.getItem(`admin_code_${adminAuth.currentEmail}`);
                
                if (!storedCode) {
                    showToast('error', 'Code Expired', 'Access code has expired. Please request a new one.');
                    clearAccessCodeInputs();
                    document.getElementById('code1').focus();
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-check"></i> Verify Code';
                    return;
                }
                
                const { code: storedCodeValue, expires } = JSON.parse(storedCode);
                
                if (Date.now() > expires) {
                    showToast('error', 'Code Expired', 'Access code has expired. Please request a new one.');
                    localStorage.removeItem(`admin_code_${adminAuth.currentEmail}`);
                    clearAccessCodeInputs();
                    document.getElementById('code1').focus();
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-check"></i> Verify Code';
                    return;
                }
                
                if (code !== storedCodeValue) {
                    showToast('error', 'Invalid Code', 'The access code you entered is incorrect');
                    clearAccessCodeInputs();
                    document.getElementById('code1').focus();
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-check"></i> Verify Code';
                    return;
                }
                
                // Code is valid - login as admin
                appState.isAdminLoggedIn = true;
                appState.isLoggedIn = true;
                appState.currentUser = {
                    email: adminAuth.currentEmail,
                    name: adminAuth.currentEmail.split('@')[0],
                    role: 'admin'
                };
                
                // Save to localStorage
                localStorage.setItem('gkStoreUser', JSON.stringify(appState.currentUser));
                localStorage.setItem('adminToken', 'authenticated');
                
                // Clear used code
                localStorage.removeItem(`admin_code_${adminAuth.currentEmail}`);
                
                // Clear timer
                adminAuth.clearTimer();
                
                showToast('success', 'Admin Access Granted', 'Welcome to Admin Panel!');
                closeModal('admin-login-modal');
                
                // Update admin button
                updateAdminButton();
                
                // Load admin content
                await loadAdminContent();
                showPage('admin');
                
            } catch (error) {
                console.error('Verification error:', error);
                showToast('error', 'Verification Error', 'An error occurred. Please try again.');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-check"></i> Verify Code';
            }
        }

        // Clear access code inputs
        function clearAccessCodeInputs() {
            for (let i = 1; i <= 6; i++) {
                const input = document.getElementById(`code${i}`);
                if (input) {
                    input.value = '';
                    input.classList.remove('filled');
                }
            }
        }

        // Move to next input field in access code
        function moveToNext(current, event) {
            const input = event.target;
            const value = input.value;
            
            // Update UI
            if (value) {
                input.classList.add('filled');
            } else {
                input.classList.remove('filled');
            }
            
            // Auto-focus next input
            if (value && current < 6) {
                document.getElementById(`code${current + 1}`).focus();
            }
            
            // Auto submit on last digit
            if (current === 6 && value) {
                const code = [
                    document.getElementById('code1').value,
                    document.getElementById('code2').value,
                    document.getElementById('code3').value,
                    document.getElementById('code4').value,
                    document.getElementById('code5').value,
                    document.getElementById('code6').value
                ].join('');
                
                if (code.length === 6) {
                    setTimeout(() => {
                        document.getElementById('admin-verify-form').dispatchEvent(new Event('submit'));
                    }, 300);
                }
            }
        }

        // Back to email step
        function backToEmailStep() {
            document.getElementById('admin-login-step2').classList.add('hidden');
            document.getElementById('admin-login-step1').classList.remove('hidden');
            clearAccessCodeInputs();
            
            adminAuth.clearTimer();
        }

        // Resend access code
        async function resendAccessCode() {
            const resendBtn = document.getElementById('resend-code-btn');
            const timerElement = document.getElementById('resend-timer');
            
            if (!adminAuth.currentEmail || !adminAuth.canResend()) return;
            
            resendBtn.disabled = true;
            resendBtn.innerHTML = '<i class="fas fa-spinner animate-spin"></i> Sending...';
            
            try {
                // Generate new code
                const newCode = adminAuth.generateAccessCode();
                adminAuth.accessCode = newCode;
                adminAuth.lastSent = Date.now();
                
                // Store new code
                localStorage.setItem(`admin_code_${adminAuth.currentEmail}`, JSON.stringify({
                    code: newCode,
                    expires: Date.now() + 10 * 60000
                }));
                
                // Simulate sending
                setTimeout(() => {
                    showToast('success', 'Code Resent', `New demo code: ${newCode}`);
                    console.log('DEMO: New access code for', adminAuth.currentEmail, 'is:', newCode);
                    
                    adminAuth.startResendTimer();
                    
                    resendBtn.disabled = false;
                    resendBtn.textContent = 'Resend Code';
                }, 1500);
                
            } catch (error) {
                showToast('error', 'Resend Error', 'An error occurred. Please try again.');
                resendBtn.disabled = false;
                resendBtn.textContent = 'Resend Code';
            }
        }

        // Admin logout
        function adminLogout() {
            appState.isAdminLoggedIn = false;
            localStorage.removeItem('adminToken');
            
            // Update admin button
            updateAdminButton();
            
            showToast('success', 'Admin Logout', 'Successfully logged out from admin panel');
            
            // Reload admin page content
            loadAdminContent();
            
            // If on admin page, redirect to home
            if (appState.currentPage === 'admin') {
                showPage('home');
            }
        }

        // Update admin button state
        function updateAdminButton() {
            const adminBtn = document.getElementById('admin-access-btn');
            if (adminBtn) {
                if (appState.isAdminLoggedIn) {
                    adminBtn.innerHTML = '<i class="fas fa-user-shield text-success"></i>';
                    adminBtn.title = 'Admin (Logged In)';
                } else {
                    adminBtn.innerHTML = '<i class="fas fa-user-shield"></i>';
                    adminBtn.title = 'Admin Login';
                }
            }
        }

        // ===========================================
        // SUPABASE SETUP SQL (RUN THIS IN SUPABASE SQL EDITOR)
        // ===========================================
        /*
        -- Step 1: Create admin_users table
        CREATE TABLE IF NOT EXISTS admin_users (
            id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
            user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
            email TEXT UNIQUE NOT NULL,
            role TEXT DEFAULT 'admin',
            created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW()),
            updated_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
        );

        -- Step 2: Enable RLS
        ALTER TABLE admin_users ENABLE ROW LEVEL SECURITY;

        -- Step 3: Create policies (admin only)
        CREATE POLICY "Only authenticated users can view admin_users" 
        ON admin_users FOR SELECT 
        USING (auth.role() = 'authenticated');

        CREATE POLICY "Only admins can insert admin_users" 
        ON admin_users FOR INSERT 
        WITH CHECK (auth.role() = 'authenticated');

        -- Step 4: Create admin_access_codes table for temporary codes
        CREATE TABLE IF NOT EXISTS admin_access_codes (
            id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
            email TEXT NOT NULL,
            code TEXT NOT NULL,
            expires_at TIMESTAMP WITH TIME ZONE NOT NULL,
            created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
        );

        -- Step 5: Create indexes for better performance
        CREATE INDEX IF NOT EXISTS idx_admin_access_codes_email 
        ON admin_access_codes(email);

        CREATE INDEX IF NOT EXISTS idx_admin_access_codes_expires 
        ON admin_access_codes(expires_at);

        -- Step 6: Add cleanup function for expired codes
        CREATE OR REPLACE FUNCTION cleanup_expired_access_codes()
        RETURNS void AS $$
        BEGIN
            DELETE FROM admin_access_codes 
            WHERE expires_at < TIMEZONE('utc', NOW());
        END;
        $$ LANGUAGE plpgsql;

        -- Step 7: Add your admin user (replace with your email)
        INSERT INTO admin_users (email, role) 
        VALUES ('your-email@example.com', 'admin')
        ON CONFLICT (email) DO NOTHING;
        */

        // ===========================================
        // SUPABASE EDGE FUNCTION FOR EMAIL (OPTIONAL)
        // ===========================================
        /*
        // Create a file named 'send-admin-code' in Supabase Edge Functions
        // with this content:

        import { serve } from 'https://deno.land/std@0.168.0/http/server.ts'
        import { Resend } from 'npm:resend@2.0.0'

        const resend = new Resend(Deno.env.get('RESEND_API_KEY'))

        serve(async (req) => {
          try {
            const { email, code } = await req.json()

            const { data, error } = await resend.emails.send({
              from: 'GK Store <admin@gkstore.com>',
              to: [email],
              subject: 'Your GK Store Admin Access Code',
              html: `
                <h2>GK Store Admin Access Code</h2>
                <p>Your access code is: <strong>${code}</strong></p>
                <p>This code will expire in 10 minutes.</p>
                <p>If you didn't request this code, please ignore this email.</p>
              `,
            })

            if (error) {
              return new Response(JSON.stringify({ error }), {
                headers: { 'Content-Type': 'application/json' },
                status: 400,
              })
            }

            return new Response(JSON.stringify({ success: true }), {
              headers: { 'Content-Type': 'application/json' },
            })
          } catch (error) {
            return new Response(JSON.stringify({ error: error.message }), {
              headers: { 'Content-Type': 'application/json' },
              status: 500,
            })
          }
        })
        */

        // ===========================================
        // LOAD INITIAL DATA
        // ===========================================
        async function loadInitialData() {
            try {
                await Promise.all([
                    loadVideosFromSupabase(),
                    loadAccountsFromSupabase(),
                    loadBookRequestsFromSupabase()
                ]);
                
                // Update user stats
                appState.userStats.onlineUsers = Math.max(appState.userStats.onlineUsers || 0, 1);
                if (appState.currentUser && appState.currentUser.role !== 'admin') {
                    appState.userStats.registeredUsers = Math.max(appState.userStats.registeredUsers || 0, 1);
                }
                
                updateNotificationCount();
                updateAdminStats();
                
            } catch (error) {
                console.error('Error loading initial data:', error);
                showToast('error', 'Connection Error', 'Could not load data from server');
                // Fallback to demo data
                await initializeWithDemoData();
            }
        }

        // Load videos from Supabase
        async function loadVideosFromSupabase() {
            try {
                const { data, error } = await supabase
                    .from('videos')
                    .select('*')
                    .order('created_at', { ascending: false });
                
                if (error) throw error;
                
                if (data && data.length > 0) {
                    appState.videos = data.map(video => ({
                        id: video.video_id,
                        title: video.video_title,
                        description: video.description,
                        views: video.views || 0,
                        likes: video.likes || 0,
                        shares: video.shares || 0,
                        duration: video.duration || '2:30',
                        url: video.video_url,
                        tier: video.account_tier,
                        price: video.price,
                        createdAt: video.created_at,
                        account: {
                            id: video.video_id,
                            title: video.video_title,
                            tier: video.account_tier,
                            price: video.price,
                            followers: Math.floor(Math.random() * 100000) + 1000
                        }
                    }));
                } else {
                    // If no videos in Supabase, check if we have demo data
                    if (appState.videos.length === 0) {
                        await initializeWithDemoData();
                    }
                }
            } catch (error) {
                console.error('Error loading videos:', error);
                throw error;
            }
        }

        // Load accounts from Supabase
        async function loadAccountsFromSupabase() {
            try {
                const { data, error } = await supabase
                    .from('videos')
                    .select('video_id, video_title, description, account_tier, price, sold')
                    .order('created_at', { ascending: false });
                
                if (error) throw error;
                
                if (data && data.length > 0) {
                    appState.accounts = data.map(video => ({
                        id: video.video_id,
                        title: video.video_title,
                        description: video.description,
                        tier: video.account_tier,
                        price: video.price,
                        sold: video.sold || false,
                        videoId: video.video_id,
                        createdAt: new Date().toISOString()
                    }));
                }
            } catch (error) {
                console.error('Error loading accounts:', error);
                throw error;
            }
        }

        // Load book requests from Supabase
        async function loadBookRequestsFromSupabase() {
            try {
                const { data, error } = await supabase
                    .from('book_requests')
                    .select('*')
                    .order('created_at', { ascending: false });
                
                if (error) throw error;
                
                if (data) {
                    appState.bookRequests = data;
                }
            } catch (error) {
                console.error('Error loading book requests:', error);
                throw error;
            }
        }

        // Initialize with demo data
        async function initializeWithDemoData() {
            // Check if we already have videos
            if (appState.videos.length > 0) return;
            
            // Create demo videos
            const demoVideos = [
                {
                    id: 'demo_001',
                    title: 'Welcome to GK Store',
                    description: 'Get started with premium accounts marketplace',
                    views: 150,
                    likes: 45,
                    shares: 12,
                    duration: '1:30',
                    url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',
                    tier: 'small',
                    price: 199,
                    createdAt: new Date().toISOString(),
                    account: {
                        id: 'demo_001',
                        title: 'Demo Account',
                        tier: 'small',
                        price: 199,
                        followers: 10000
                    }
                },
                {
                    id: 'demo_002',
                    title: 'Premium Account Showcase',
                    description: 'See our premium accounts in action',
                    views: 250,
                    likes: 85,
                    shares: 25,
                    duration: '2:15',
                    url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4',
                    tier: 'medium',
                    price: 399,
                    createdAt: new Date().toISOString(),
                    account: {
                        id: 'demo_002',
                        title: 'Premium Account',
                        tier: 'medium',
                        price: 399,
                        followers: 25000
                    }
                }
            ];
            
            appState.videos = demoVideos;
            
            appState.accounts = [
                {
                    id: 'demo_001',
                    title: 'Demo Account',
                    description: 'Get started with premium accounts',
                    tier: 'small',
                    price: 199,
                    sold: false,
                    videoId: 'demo_001',
                    createdAt: new Date().toISOString()
                },
                {
                    id: 'demo_002',
                    title: 'Premium Account',
                    description: 'Advanced features and capabilities',
                    tier: 'medium',
                    price: 399,
                    sold: false,
                    videoId: 'demo_002',
                    createdAt: new Date().toISOString()
                }
            ];
            
            appState.notifications = [{
                id: 'notif_001',
                title: 'Welcome to GK Store',
                message: 'Start exploring premium video content',
                icon: 'fas fa-play-circle',
                color: 'primary',
                time: 'Just now',
                read: false
            }];
            
            appState.userStats = {
                registeredUsers: 1,
                onlineUsers: 1
            };
        }

        // ===========================================
        // PAGE MANAGEMENT
        // ===========================================
        async function showPage(page) {
            const protectedPages = ['home', 'accounts', 'profile', 'contact', 'admin', 'notifications'];
            if (protectedPages.includes(page) && !appState.isLoggedIn) {
                page = 'auth';
            }
            
            if (page === 'auth' && appState.isLoggedIn) {
                page = 'home';
            }
            
            // Special handling for admin page
            if (page === 'admin' && !appState.isAdminLoggedIn) {
                showAdminLogin();
                return;
            }
            
            const pages = document.querySelectorAll('[id$="-page"]');
            pages.forEach(p => p.classList.add('hidden'));
            
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            
            const pageElement = document.getElementById(`${page}-page`);
            if (pageElement) {
                pageElement.classList.remove('hidden');
                appState.currentPage = page;
                
                window.history.pushState(null, null, `#${page}`);
                
                const activeNavItem = document.querySelector(`.nav-item[href="#${page}"]`);
                if (activeNavItem) {
                    activeNavItem.classList.add('active');
                }
                
                switch(page) {
                    case 'auth':
                        showLoginForm();
                        break;
                    case 'home':
                        await loadHomeContent();
                        break;
                    case 'accounts':
                        await loadAccountsContent();
                        break;
                    case 'admin':
                        await loadAdminContent();
                        break;
                    case 'notifications':
                        await loadNotificationsContent();
                        break;
                }
            }
        }

        // Load admin page content
        async function loadAdminContent() {
            const adminDashboard = document.getElementById('admin-dashboard');
            const adminLoginRequired = document.getElementById('admin-login-required');
            
            if (appState.isAdminLoggedIn) {
                if (adminDashboard) adminDashboard.classList.remove('hidden');
                if (adminLoginRequired) adminLoginRequired.classList.add('hidden');
                updateAdminStats();
            } else {
                if (adminDashboard) adminDashboard.classList.add('hidden');
                if (adminLoginRequired) adminLoginRequired.classList.remove('hidden');
            }
        }

        // ===========================================
        // VIDEO PLAYER FUNCTIONS
        // ===========================================
        function initializeVideoOptimization() {
            // Set up visibility change for video pause/play
            document.addEventListener('visibilitychange', () => {
                if (document.hidden && appState.currentVideoPlayer) {
                    appState.isVideoPlaying = !appState.currentVideoPlayer.paused;
                    if (!appState.currentVideoPlayer.paused) {
                        appState.currentVideoPlayer.pause();
                    }
                } else if (!document.hidden && appState.isVideoPlaying && appState.currentVideoPlayer) {
                    appState.currentVideoPlayer.play().catch(e => console.log('Auto-play prevented'));
                }
            });
            
            // Handle fullscreen changes
            document.addEventListener('fullscreenchange', handleFullscreenChange);
            document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
            document.addEventListener('mozfullscreenchange', handleFullscreenChange);
            document.addEventListener('MSFullscreenChange', handleFullscreenChange);
        }

        function handleFullscreenChange() {
            const isFullscreen = document.fullscreenElement || 
                                document.webkitFullscreenElement || 
                                document.mozFullScreenElement || 
                                document.msFullscreenElement;
            
            appState.isFullscreen = !!isFullscreen;
            
            if (!isFullscreen && appState.isMobile) {
                const videoContainer = document.getElementById('main-video-container');
                if (videoContainer) {
                    videoContainer.classList.remove('video-fullscreen-mode');
                }
            }
        }

        function handleOrientationChange() {
            if (appState.currentVideoPlayer) {
                setTimeout(() => {
                    if (appState.isFullscreen) {
                        adjustVideoForFullscreen();
                    }
                }, 300);
            }
        }

        function adjustVideoForFullscreen() {
            if (!appState.currentVideoPlayer) return;
            
            const videoContainer = document.getElementById('main-video-container');
            if (videoContainer && appState.isFullscreen) {
                videoContainer.classList.add('video-fullscreen-mode');
                appState.currentVideoPlayer.style.objectFit = 'contain';
            }
        }

        // ===========================================
        // EVENT LISTENERS SETUP
        // ===========================================
        function setupEventListeners() {
            // Keyboard navigation for videos
            document.addEventListener('keydown', (e) => {
                if (appState.currentPage === 'home') {
                    switch(e.key) {
                        case 'ArrowUp':
                            e.preventDefault();
                            navigateVideo('prev');
                            break;
                        case 'ArrowDown':
                            e.preventDefault();
                            navigateVideo('next');
                            break;
                        case ' ':
                            e.preventDefault();
                            toggleVideoPlayback();
                            break;
                    }
                }
            });

            // Touch navigation for videos
            let touchStartY = 0;
            const videoSection = document.getElementById('main-video-container');
            
            if (videoSection) {
                videoSection.addEventListener('touchstart', (e) => {
                    touchStartY = e.touches[0].clientY;
                });

                videoSection.addEventListener('touchend', (e) => {
                    const touchEndY = e.changedTouches[0].clientY;
                    const diff = touchStartY - touchEndY;
                    
                    if (Math.abs(diff) > 50) {
                        if (diff > 0) {
                            navigateVideo('next');
                        } else {
                            navigateVideo('prev');
                        }
                    }
                });
            }

            // Infinite scroll
            window.addEventListener('scroll', () => {
                if (appState.currentPage === 'home') {
                    const scrollTop = window.pageYOffset;
                    const windowHeight = window.innerHeight;
                    const documentHeight = document.documentElement.scrollHeight;
                    
                    if (scrollTop + windowHeight >= documentHeight - 100) {
                        loadMoreVideos();
                    }
                }
            });

            // File upload
            const fileUploadArea = document.getElementById('file-upload-area');
            if (fileUploadArea) {
                fileUploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    fileUploadArea.classList.add('dragover');
                });

                fileUploadArea.addEventListener('dragleave', () => {
                    fileUploadArea.classList.remove('dragover');
                });

                fileUploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    fileUploadArea.classList.remove('dragover');
                    
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        handleFileSelect({ target: { files } });
                    }
                });
            }

            // Network status
            window.addEventListener('online', () => {
                document.getElementById('offline-indicator').classList.remove('show');
                showToast('success', 'Back Online', 'Connection restored');
            });

            window.addEventListener('offline', () => {
                document.getElementById('offline-indicator').classList.add('show');
                showToast('error', 'Offline', 'Connection lost. Some features may not work.');
            });
            
            // Video click to play/pause
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('video-optimized') || 
                    e.target.closest('.video-container')) {
                    toggleVideoPlayback();
                }
            });
            
            // Admin form listeners
            document.getElementById('admin-login-form')?.addEventListener('submit', handleAdminEmailSubmit);
            document.getElementById('admin-verify-form')?.addEventListener('submit', handleAccessCodeVerify);
        }

        // ===========================================
        // PWA INSTALLATION
        // ===========================================
        function setupPWAInstall() {
            isAppInstalled = window.matchMedia('(display-mode: standalone)').matches || 
                           window.navigator.standalone === true;
            
            if (isAppInstalled) {
                document.body.classList.add('pwa-installed');
                document.getElementById('pwa-install-btn')?.classList.add('hidden');
                return;
            }
            
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                
                setTimeout(() => {
                    const installBtn = document.getElementById('pwa-install-btn');
                    if (installBtn) {
                        installBtn.classList.remove('hidden');
                        installBtn.addEventListener('click', showPWAInstallModal);
                    }
                }, 3000);
            });
            
            window.addEventListener('appinstalled', () => {
                isAppInstalled = true;
                document.body.classList.add('pwa-installed');
                const installBtn = document.getElementById('pwa-install-btn');
                if (installBtn) {
                    installBtn.classList.add('hidden');
                }
                closeModal('pwa-install-modal');
                showToast('success', 'App Installed', 'GK Store has been installed successfully!');
            });
            
            const installConfirmBtn = document.getElementById('pwa-install-confirm');
            if (installConfirmBtn) {
                installConfirmBtn.addEventListener('click', installPWA);
            }
        }

        function showPWAInstallModal() {
            if (isAppInstalled) {
                showToast('info', 'Already Installed', 'App is already installed on your device');
                return;
            }
            
            if (!deferredPrompt) {
                showToast('info', 'Install Available', 'Install option will appear soon. Please wait.');
                return;
            }
            
            showModal('pwa-install-modal');
        }

        async function installPWA() {
            if (!deferredPrompt) {
                showToast('error', 'Install Failed', 'Installation is not available at the moment');
                return;
            }
            
            try {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                
                if (outcome === 'accepted') {
                    console.log('User accepted the install prompt');
                } else {
                    console.log('User dismissed the install prompt');
                }
                
                deferredPrompt = null;
            } catch (error) {
                console.error('Install error:', error);
                showToast('error', 'Install Failed', 'Could not install the app. Please try again.');
            }
        }

        // ===========================================
        // UTILITY FUNCTIONS
        // ===========================================
        function loadPreferences() {
            const savedLanguage = localStorage.getItem('appLanguage') || 'en';
            const savedTheme = localStorage.getItem('appTheme') || 'dark';
            
            appState.language = savedLanguage;
            appState.theme = savedTheme;
            
            document.documentElement.setAttribute('data-theme', savedTheme);
        }

        function showToast(type, title, message) {
            const toast = document.getElementById('toast');
            const toastIcon = document.getElementById('toast-icon');
            const toastTitle = document.getElementById('toast-title');
            const toastMessage = document.getElementById('toast-message');
            
            if (!toast || !toastIcon || !toastTitle || !toastMessage) return;
            
            let iconClass = 'fas fa-info-circle';
            let iconColor = 'text-primary';
            
            switch(type) {
                case 'success':
                    iconClass = 'fas fa-check-circle';
                    iconColor = 'text-success';
                    break;
                case 'error':
                    iconClass = 'fas fa-exclamation-circle';
                    iconColor = 'text-danger';
                    break;
                case 'warning':
                    iconClass = 'fas fa-exclamation-triangle';
                    iconColor = 'text-warning';
                    break;
                case 'info':
                    iconClass = 'fas fa-info-circle';
                    iconColor = 'text-secondary';
                    break;
            }
            
            toastIcon.className = `${iconClass} ${iconColor} mt-0.5`;
            toastTitle.textContent = title;
            toastMessage.textContent = message;
            
            toast.classList.remove('hidden');
            
            setTimeout(hideToast, 3000);
        }

        function hideToast() {
            const toast = document.getElementById('toast');
            if (toast) {
                toast.classList.add('hidden');
            }
        }

        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }
        }

        // ===========================================
        // REMAINING FUNCTIONS (KEEP YOUR ORIGINAL CODE)
        // ===========================================
        // [Include all your remaining functions here exactly as they were in your original file]
        // This includes: loadHomeContent, loadVideo, navigateVideo, toggleVideoPlayback,
        // loadAccountsContent, filterAccounts, showUploadVideo, uploadVideo, 
        // showManageVideos, adminFilterVideos, deleteVideo, showBookRequests,
        // loadAdminBookRequests, contactRequester, markAsCompleted, showManageSettings,
        // saveAdminSettings, updateAdminStats, loadNotificationsContent, updateNotificationCount,
        // shareVideo, bookAccount, buyNow, submitBookRequest, copyUSDTAddress, copyAddress,
        // openWhatsApp, openPaymentChat, sendContactMessage, logout, showLoginForm,
        // showSignupForm, showForgotPassword, login, signup, resetPassword, socialLogin,
        // showTerms, showPrivacy, closeWelcomeModal, toggleLanguage, setLanguage, toggleTheme,
        // and all other functions from your original file

        // ===========================================
        // INITIALIZE APP
        // ===========================================
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
